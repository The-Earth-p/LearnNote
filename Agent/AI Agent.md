# AI Agent

简介：

![image-20250707114152742](C:\Users\Only one\AppData\Roaming\Typora\typora-user-images\image-20250707114152742.png)

现在基本都是多智能体，多角色，每个角色都有自己的属性；智能体之间有交互，可以手动设置，也可以让他们自己去学习交互

## 框架

不管什么框架，都需要key，现在私有领域去训练自己的大模型是行不通的。框架中会把角色、交互、api调用定义好的。

## GPTS任务流程（案例

目标：要抄出一篇公众号

语聚AI这个平台能够提供很多api来直接调用，指定需要调用的api，这些api是和动作绑定的，可以指定具体的动作，会提供相应选项的，然后就能生成一个key，再到gpts当中，配置这个平台提供的apikey，Instruction当中可以指定具体的action；在rules中指定具体的生成步骤，在attention中指定要求，还可以指定身份，目标，技能，语气，这些格式网上都有，这些设置好后，保存，就有自己专有的一个大模型来做这个抄文章的工作了，只需要输入网址就行

## MetaGPT开发单动作智能体

按照人家的框架来整

### 动作定义

给动作类起名，但必须继承Action；有一个模板提示；重写run函数：首先把模板中的提示信息补充完整，并且返回一个对象，将这个对象直接传入提问函数中，就能够得到一个回复，然后可以自由选择要不要进行个性化的输出

### 角色定义

和动作定义一样，给角色类起名，并继承Role。在初始化当中要给这个角色装备上一个动作类，装备了之后，这个角色下面的_rc.todo参数就能够执行这个动作，通常把它赋值给新定义的变量todo，然后对这个todo执行run方法（其实就是上面动作类定义的哪个run）就可以，但是run函数是需要参数的，因此需要msg来通过get_memory这个方法来获取上下文信息，run执行过后会返回内容，再用Message类封装一下就行

### 多动作

定义多个动作类；角色定义的时候需要把两个类都装备上，并且还多了一行代码来指定动作执行顺序或方式

### 定时器制作

任务目标：每天去爬一些信息并整理推送

总共两个动作，各一个动作类，第一个动作是爬虫，直接重写一下run函数就行；第二动作定义想要的输出的公众号格式还有其他细节。另外还需要一个时间触发器

## RAG

检索、增强、生成，保证回答数据支持更可靠，信息更新，证据更充分

做这个东西可以理解为智能体在数据层面的个性化，不然的话每次想要做一个专业领域的东西，都得重新训练，相比之下还是直接接一个数据库方便一些。用了RAG相当于给智能体接了一个我们自己定义的数据库，能够自己获取数据库中相关向量输出知识，回答能够更贴合我们自身的情况。一般是通过各种接口工具来处理各式各样的数据形式，最终生成嵌入向量

![image-20250711161042208](C:\Users\Only one\AppData\Roaming\Typora\typora-user-images\image-20250711161042208.png)

### 外挂数据库

可以用SuperDuperDB这个库来解决数据处理的问题

## 记忆信息

该信息需要不停更新的，以文本形式存储，记忆还有重要性，每一条记忆添加的时候，需要做反思工作的，到底应该做什么，会受影响，反思去形成未来的行为是更重要的

记忆信息在初始的时候，就会有很多提示，人为指定的

## 斯坦福AI小镇

![image-20250711172844747](C:\Users\Only one\AppData\Roaming\Typora\typora-user-images\image-20250711172844747.png)

首先角色去感知，更新记忆信息，然后检索、思考、规划，然后更新记忆信息。最后输出计划

### 感知模块

时效性，重要性，相关性都能够得到计算，最终得到这一条记忆的综合得分，放到日志里面

### 思考模块

通过记忆来提出问题或者反思，给到大模型，大模型能够得到一些总结信息，然后根据这些总结信息，就能够产生一些行为

##  MOE

专家系统，比如有好多个专家，每个专家都对一个样本做处理，各个专家对不同的样本有不同的系数，最终根据系数叠加

## 大模型落地

比如LoRA，想要做自己的下游任务，可以把它原始模型参数冻结，然后聚焦自己想做的小模型，训练出来后做叠加就可以。细节如下：

注意：100w\*100w变成100w\*100和100*100w，让需要训练从参数数量大大减少，下图右半部分所示

![image-20250716121354129](C:\Users\Only one\AppData\Roaming\Typora\typora-user-images\image-20250716121354129.png)
